<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show Timings</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <%- include("../partials/navbar") %>
        <div class="container mt-5">
            <h2 class="text-center mb-4" style="font-style: italic;">All User Bookings</h2>
            <table class="table table-bordered table-hover">
                <thead class="table-dark">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Ticket Number</th>
                        <th scope="col">Username</th>
                        <th scope="col">Email</th>
                        <th scope="col">Seats Booked</th>
                        <th scope="col">Show ID</th>
                        <th scope="col">Movie</th>
                        <th scope="col">Start</th>
                        <th scope="col">End</th>
                        <th scope="col">Status</th>


                    </tr>
                </thead>
                <tbody>
                    <% if(allBookings[0].length !=0) { %>
                        <% allBookings[0].forEach((booking, index)=> { %>
                            <tr>
                                <th scope="row">
                                    <%= index + 1 %>
                                </th>
                                <td>
                                    <%= booking.ticket_no %>
                                </td>
                                <td>
                                    <%= booking.u_name %>
                                </td>
                                <td>
                                    <%= booking.email_id %>
                                </td>
                                <td>
                                    <%= booking.seat_no %>
                                </td>
                                <td>
                                    <%= booking.show_id %>
                                </td>
                                <td>
                                    <%= booking.m_name %>
                                </td>
                                <td>
                                    <%= booking.st_time %>
                                </td>
                                <td>
                                    <%= booking.end_time %>
                                </td>
                                <td>
                                    <form action="/bookings/delete" method="POST">
                                        <input type="hidden" name="ticket_no" value="<%= booking.ticket_no %> ">
                                        <input type="hidden" name="seat_no" value="<%= booking.seat_no %>">
                                        <input type="hidden" name="show_id" value="<%= booking.show_id %>">
                                        <button type="submit" class="btn btn-danger btn-sm"
                                            onclick="return confirm('Are you sure you want to remove selected booking?')">Remove</button>
                                    </form>
                                </td>
                            </tr>
                            <% }) %>
                                <% } else { %>
                                    <tr>
                                        <th scope="row">
                                            -
                                        </th>
                                        <td>
                                            -
                                        </td>
                                        <td>
                                            -
                                        </td>
                                        <td>
                                            -
                                        </td>
                                        <td>
                                            -
                                        </td>
                                        <td>
                                            <strong style="font-style: italic;">No shows opened yet</strong>
                                        </td>
                                    </tr>
                                    <% } %>
                </tbody>
            </table>
        </div>

</body>

</html>